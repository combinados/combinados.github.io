"use strict";angular.module("bolao.carrossel",[]).directive("carrossel",["BD","$timeout",function(a,e){return{restrict:"E",transclude:"true",replace:"true",templateUrl:"components/carrossel/diretivas/diretiva-carrossel.html",scope:{totalPaginas:"=",boleiro:"="},controller:["$scope",function(i){i.direcao="esquerda",i.paginas=[];var o=this,n=1,s=function(a){angular.forEach(i.paginas,function(e){return e.conteudo.id===a?void e.exibir():void 0})};i.atualizarPagina=function(o,t){i.direcao=void 0===t?n>=o?"esquerda":"direita":t;var r=!0,l=!1;angular.forEach(i.paginas,function(a){a.conteudo.id===n&&(a.ocultar(),l=!0),a.conteudo.id===o&&(r=!1),!r&&l}),r&&i.boleiro.rodadas.push(a.pegarRodada(i.boleiro.id,o)),e(function(){s(o)},100),n=o},i.ehPaginaAtual=function(a){return n===a},i.proximaPagina=function(){var a=n,e=a<i.totalPaginas?++a:1;i.atualizarPagina(e,"direita")},i.paginaAnterior=function(){var a=n,e=a>1?--a:i.totalPaginas;i.atualizarPagina(e,"esquerda")},o.adicionarPagina=function(a){1===n&&a.exibir(),i.paginas.push(a)}}]}}]).directive("pagina",function(){return{require:"^carrossel",restrict:"E",transclude:"true",replace:"true",scope:{conteudo:"="},link:function(a,e,i,o){a.exibir=function(){a.visivel=!0,a.detalheVisivel=!0},a.ocultar=function(){a.visivel=!1,a.detalheVisivel=!1},a.alternarDetalhe=function(){a.detalheVisivel=!a.detalheVisivel},a.ocultar(),o.adicionarPagina(a)},templateUrl:"components/carrossel/diretivas/diretiva-paginas.html"}}),angular.module("bolao.acordeon",[]).directive("acordeon",function(){return{restrict:"E",transclude:"true",replace:"true",templateUrl:"components/acordeon/diretivas/diretiva-acordeon.html",scope:"true",controller:["$scope",function(a){var e=this,i=0;a.itens=[],e.adicionarItem=function(e){a.itens.push(e)},e.abrir=function(e){e===i?a.itens[i].visivel?a.itens[e].ocultar():a.itens[e].exibir():(a.itens[i].ocultar(),a.itens[e].exibir()),i=e}}]}}).directive("item",["BD",function(a){return{require:"^acordeon",restrict:"E",transclude:"true",replace:"true",scope:{boleiro:"=",indice:"@"},link:function(e,i,o,n){e.direcao="esquerda",e.exibir=function(){e.visivel=!0,e.situacao="item-aberto"},e.abrir=function(i){e.boleiro.rodadas||(e.boleiro.rodadas=[],e.boleiro.rodadas.push(a.pegarRodada(e.boleiro.id,1))),n.abrir(i)},e.ocultar=function(){e.visivel=!1,e.situacao="item-fechado"},e.ocultar(),n.adicionarItem(e)},templateUrl:"components/acordeon/diretivas/diretiva-item.html"}}]),angular.module("bolao",["bolao.carrossel","bolao.acordeon"]),angular.module("bolao").factory("BD",["$http","$templateCache",function(a,e){var i,o=0,n="bd.json";return{pegarBoleiros:function(){return a({method:"GET",url:n,cache:e,headers:{"X-Api-Secret":"xxx",Authorization:"xxx","Content-Type":"undefined"}}).then(function(a){return i=a.data})},pegarRodada:function(a,e){return o++,{id:e,data:"01/05/2015",jogos:[{mandante:{escudo:"assets/images/flamengo_60x60.png",nome:"Flamengo",gols:0},visitante:{escudo:"assets/images/fluminense_60x60.png",nome:"Fluminense",gols:0}},{mandante:{escudo:"assets/images/cruzeiro_60x60.png",nome:"Cruzeiro",gols:0},visitante:{escudo:"assets/images/internacional_60x60.png",nome:"Internacional",gols:0}},{mandante:{escudo:"assets/images/corinthians_60x60.png",nome:"Corinthians",gols:0},visitante:{escudo:"assets/images/sao_paulo_60x60.png",nome:"São Paulo",gols:0}},{mandante:{escudo:"assets/images/atletico_mg_60x60.png",nome:"Atlético-MG",gols:0},visitante:{escudo:"assets/images/santos_60x60.png",nome:"Santos",gols:0}},{mandante:{escudo:"assets/images/goias_60x60.png",nome:"Goiás",gols:0},visitante:{escudo:"assets/images/gremio_60x60.png",nome:"Grêmio",gols:0}},{mandante:{escudo:"assets/images/botafogo_60x60.png",nome:"Botafogo",gols:0},visitante:{escudo:"assets/images/coritiba_60x60.png",nome:"Coritiba",gols:0}},{mandante:{escudo:"assets/images/bahia_60x60.png",nome:"Bahia",gols:0},visitante:{escudo:"assets/images/criciuma_60x60.png",nome:"Criciúma",gols:0}},{mandante:{escudo:"assets/images/vitoria_60x60.png",nome:"Vitória",gols:0},visitante:{escudo:"assets/images/figueirense_60x60.png",nome:"Figueirense",gols:0}},{mandante:{escudo:"assets/images/sport_60x60.png",nome:"Sport",gols:0},visitante:{escudo:"assets/images/palmeiras_60x60.png",nome:"Palmeiras",gols:0}},{mandante:{escudo:"assets/images/flamengo_60x60.png",nome:"Flamengo",gols:0},visitante:{escudo:"assets/images/fluminense_60x60.png",nome:"Fluminense",gols:0}}]}}}}]),angular.module("bolao").controller("ControlePrincipal",["$scope","BD",function(a,e){a.boleiros=[],e.pegarBoleiros().then(function(e){a.boleiros=e})}]),angular.module("bolao").run(["$templateCache",function(a){a.put("components/acordeon/diretivas/diretiva-acordeon.html",'<div class="acordeon" ng-transclude=""></div>'),a.put("components/acordeon/diretivas/diretiva-item.html",'<div class="item {{situacao}}"><div class="item-cabecalho {{situacao}}" ng-click="abrir(indice)"><img ng-src="{{boleiro.foto}}{{1 * indice + 1}}.png"><div class="nome">{{boleiro.nome}}</div><div class="valores">Pontos: {{boleiro.pontos}}</div><div class="valores">Placares: {{boleiro.placares}}</div><div class="valores">Média: {{boleiro.placares}}</div></div><div ng-transclude=""></div></div>'),a.put("components/carrossel/diretivas/diretiva-carrossel.html",'<div class="carrossel"><nav class="navegacao"><ul class="pontos"><li class="ponto" ng-class="{\'ativo\':ehPaginaAtual($index + 1)}" ng-repeat="pagina in (0|number:totalPaginas - 2 ) track by $index" ng-click="atualizarPagina($index + 1);">{{$index + 1}}</li></ul></nav><div ng-transclude="" class="paginas {{direcao}}"></div><a class="seta anterior" ng-click="paginaAnterior()"></a> <a class="seta proxima" ng-click="proximaPagina()"></a></div>'),a.put("components/carrossel/diretivas/diretiva-paginas.html",'<div class="pagina" ng-hide="!visivel"><div class="conteudo" ng-transclude="" ng-click="alternarDetalhe()"></div><div ng-click="alternarDetalhe()" class="detalhe" ng-class="{ocultar : !detalheVisivel}"><div>Detalhes da Rodada</div><label>Número</label><input class="caixa-texto" type="text" ng-click="$event.stopPropagation();" value="{{$parent.$index}}"> <label>Descrição</label><input class="caixa-texto" type="text" ng-click="$event.stopPropagation();" value="{{conteudo.descricao}}"></div></div>')}]);